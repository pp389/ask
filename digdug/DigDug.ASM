.286
IDEAL
MODEL small
stack 600h

DATASEG

	printNumArr 	DB 0,0,0,0,'$' 
	Print_Dec		DB 0,0,0,0,0,'$'
	ARR_DEC			DB 0,0,0,0,0
	SCORE			DW 0
	HP_FLAG			DB FALSE
	STR_GAMEOVER	DB 'GAME OVER!$'
	STR_SCORE		DB 'POINTS:$'
	STR_PAUSED		DB 'PAUSE$'
	STR_PAUSED_1	DB 27h,'E', 27h, '= EXIT$'
	STR_PAUSED_2	DB 27h, 'R', 27h, ' = RESUME$'

	PACX			DW 63
	PACY			DW 9 
	DIR				DW DIR_N
	NEXTDIR			DW DIR_N
	
	CLOCK_BASE 	DB 0

	INT_MOV		DW 3
	CNT_MOV		DW 0 
	
	INT_GMOV	DW 3
	CNT_GMOV	DW 0
	
	INT_MODE	DW 180
	CNT_MODE	DW 0
	INT_CHASE	DW 126
	INT_SCAT	DW 72
	
	INT_FRI		DW 126
	CNT_FRI		DW 0
	
	INT_BLINK	DW 5
	CNT_BLINK	DW 0

	MONSTERS 		DW 56 dup (0)
	ARR_END 	DW 0
	ARR_JMP		DW 28
	IS_FRIGH	DB FALSE
	EATGHOST	DW 200
	PREV_MODE	DW MODE_SCAT
	M_BLINK		DW -1
	M_FRI_COL	DW 86h, 44h, WHITE_1, RED

	PLAYER_ANI_U	DW 8 DUP (0)
	PLAYER_ANI_D	DW 8 DUP (0)
	PLAYER_ANI_L	DW 8 DUP (0)
	PLAYER_ANI_R	DW 8 DUP (0)		
	PLAYER_FP		DW 0	

	LOSE_ANI	DW 6 DUP (0)

	SPEED   		DW 4
	DUR_1ST_SCAT	DW 108
	DUR_CHASE		DW 540
	DUR_SCAT		DW 72
	DUR_FRI			DW 54
	LEVEL			DW 0

	MENU_PTR	DB 0
	STR_PLAY	DB "PLAY$"
	STR_HELP	DB "HELP$"
	STR_EXIT	DB "EXIT$"
	STR_INST_1	DB "ARROWS = MOVE$"
	STR_INST_2	DB "MONSTERS - BAD$"

	MENU_TXT_OFF	DW 0,0,0
	MENU_TXT_COL	DW 0,0,0

	INCLUDE "Data.asm" 


CODESEG
	INCLUDE "Timers.asm"
	INCLUDE "Text.asm"
	INCLUDE "Graphics.asm"
	INCLUDE "Game.asm"
	INCLUDE "Player.asm"    
	INCLUDE "Monster.asm"
	INCLUDE "AI.asm"  
	INCLUDE "Layout.asm"   
	INCLUDE "Math.asm"      
	INCLUDE "MainMenu.asm" 

	
Start:
	MOV AX, @data
	MOV DS, AX

	call graphics_Mode 

	MOV [ARR_END], OFFSET MONSTERS
	ADD [WORD PTR ARR_END], 112		

CALL MAINMENU

GetFirstDir:
	CALL GAME_INPUT
	CMP [DIR], DIR_N
	JZ  GetFirstDir


Update:
	CALL GAME_INPUT	
	CALL ENABLE_MONSTERS	
	CALL CLOCK
	JMP  Update			

Exit:
	CALL text_Mode
	MOV AX, 4C00H
	INT 21H
	
END Start
	
